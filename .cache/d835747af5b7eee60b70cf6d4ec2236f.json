{"dependencies":[{"name":"babel-runtime/regenerator"},{"name":"babel-runtime/helpers/asyncToGenerator"},{"name":"babel-runtime/core-js/object/get-prototype-of"},{"name":"babel-runtime/helpers/classCallCheck"},{"name":"babel-runtime/helpers/createClass"},{"name":"babel-runtime/helpers/possibleConstructorReturn"},{"name":"babel-runtime/helpers/inherits"},{"name":"ramda"},{"name":"../lib/utils/fetch"},{"name":"events","loc":{"line":5,"column":29}}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require(\"babel-runtime/regenerator\");\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require(\"babel-runtime/helpers/asyncToGenerator\");\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _ramda = require(\"ramda\");\n\nvar _fetch = require(\"../lib/utils/fetch\");\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EventEmitter = require('events');\n\nvar API_ENDPOINT = 'http://localhost:3000';\n\nvar Configuru = function (_EventEmitter) {\n  (0, _inherits3.default)(Configuru, _EventEmitter);\n\n  function Configuru(apiKey, opts) {\n    (0, _classCallCheck3.default)(this, Configuru);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Configuru.__proto__ || (0, _getPrototypeOf2.default)(Configuru)).call(this));\n\n    _this.isLoaded = false;\n    _this.apiKey = apiKey;\n    _this.options = opts;\n    _this.initConfig();\n    return _this;\n  }\n\n  (0, _createClass3.default)(Configuru, [{\n    key: \"onConfigLoaded\",\n    value: function onConfigLoaded(data) {\n      this.isLoaded = true;\n      this.config = data;\n      this.emit('loaded', data);\n    }\n  }, {\n    key: \"initConfig\",\n    value: function () {\n      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n        var data;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.emit('fetching');\n                _context.next = 3;\n                return (0, _fetch2.default)(API_ENDPOINT + \"/\" + this.apiKey);\n\n              case 3:\n                data = _context.sent;\n\n                try {\n                  this.onConfigLoaded(data);\n                } catch (err) {\n                  this.emit('error', err);\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initConfig() {\n        return _ref.apply(this, arguments);\n      }\n\n      return initConfig;\n    }()\n  }, {\n    key: \"get\",\n    value: function get(key, defaultValue) {\n      if (!key) return this.config;\n      return (0, _ramda.type)(key) === 'Array' ? (0, _ramda.pathOr)(defaultValue, key, this.config) : (0, _ramda.propOr)(defaultValue, key, this.config);\n    }\n  }]);\n  return Configuru;\n}(EventEmitter);\n\nexports.default = Configuru;\nmodule.exports = exports[\"default\"];"},"hash":"0f97893fc0be55aec0a3a2dd920610aa"}